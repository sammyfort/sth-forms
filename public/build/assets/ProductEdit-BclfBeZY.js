import{d as v,r as f,x as h,f as x,q as c,c as k,o as g,a as t,u as o,g as U,w as d,b as m,j as P,i as q,F as $}from"./app-CO7tRMPa.js";import{t as N,a as S}from"./helpers-qni1jYST.js";import{_ as V}from"./Layout.vue_vue_type_script_setup_true_lang-DCs0JVu0.js";import{_ as B}from"./PageHeader.vue_vue_type_script_setup_true_lang-DHokSiwN.js";import{_ as E}from"./FormComponent.vue_vue_type_script_setup_true_lang-DCnyKwIV.js";import{_ as n}from"./InputSelect.vue_vue_type_script_setup_true_lang-C5DndcLU.js";import{_ as i}from"./InputText.vue_vue_type_script_setup_true_lang-IUH4eXc3.js";import{_ as R}from"./FeatureFileUpload.vue_vue_type_script_setup_true_lang-Bv-zyP7Q.js";import{_ as C}from"./GalleryFilesUpload.vue_vue_type_script_setup_true_lang-Bi7Qv6Kw.js";import{_ as I}from"./TextEditor.vue_vue_type_script_setup_true_lang-ByG2lzr0.js";import{_ as F}from"./InputError.vue_vue_type_script_setup_true_lang-DKKlDoxn.js";import{B as M}from"./building-2-C02OaBJh.js";import"./index-B7bkwbD9.js";import"./index-CwPhLhxX.js";import"./utils-bRKmu4jq.js";import"./Primitive-Bt2Vqvy7.js";import"./index-dkW4UkYo.js";import"./createLucideIcon-DSnvKsHv.js";import"./x-D1YiTpkX.js";import"./check-DKQq6rvE.js";import"./Label.vue_vue_type_script_setup_true_lang-Qzvkm3M0.js";import"./Input.vue_vue_type_script_setup_true_lang-nOOGLbz_.js";import"./upload-j3A8EneV.js";import"./plus-B2eoExmG.js";const W={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},j={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},D={class:"col-span-1 md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6"},ue=v({__name:"ProductEdit",props:{categories:{},regions:{},choices:{},product:{},statuses:{}},setup(_){const l=_,b=f(),y=f(),e=h({name:"",status:"",description:"",short_description:"",price:"",categories:[],is_negotiable:"",first_mobile:"",second_mobile:"",whatsapp_mobile:"",video_link:"",website:"",town:"",region_id:"",featured:null,gallery:[],removed_gallery_urls:[]});x(()=>{console.log(l.product);const r=l.product;e.region_id=r.region_id,e.name=r.name,e.status=r.status,e.categories=(r.categories||[]).map(s=>s.id),e.description=r.description,e.short_description=r.short_description,e.price=r.price,e.is_negotiable=r.is_negotiable?"yes":"no",e.first_mobile=r.first_mobile,e.second_mobile=r.second_mobile,e.town=r.town,e.video_link=r.video_link,e.website=r.website});const p=c(()=>l.product.gallery?Array.from(l.product.gallery).map((s,a)=>({url:s,isOriginal:!0,originalIndex:a})):[]),u=c(()=>Object.keys(e.errors).filter(r=>r.startsWith("gallery.")).map(r=>e.errors[r])),w=()=>{e.put(route("my-products.update",l.product.id),{onSuccess:r=>{r.props.success?N(r.props.message):S(r.props.message)}})};return(r,s)=>(g(),k($,null,[t(o(U),{title:"Update Product"}),t(V,null,{default:d(()=>[m("div",W,[t(B,{title:"Edit Product",subtitle:"Update Product",icon:o(M)},null,8,["icon"]),t(E,{form:o(e),"featured-preview":l.product.featured,"gallery-items":p.value,"gallery-errors":u.value,"submit-text":"Update Product","processing-text":"Updating Product...",onSubmit:w},{"form-sections":d(()=>[m("div",j,[s[3]||(s[3]=m("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"Product Information",-1)),m("div",A,[t(n,{label:"Select Region",form:o(e),model:"region_id",options:l.regions,required:"",searchable:""},null,8,["form","options"]),t(i,{form:o(e),label:"Product Name",model:"name",required:""},null,8,["form"]),t(n,{form:o(e),label:"Status",model:"status",options:l.statuses,required:""},null,8,["form","options"]),t(n,{form:o(e),label:"Category",model:"categories",options:l.categories,taggable:"",required:"",searchable:""},null,8,["form","options"]),t(i,{form:o(e),label:"Price",model:"price",type:"number",required:""},null,8,["form"]),t(n,{label:"Is Negotiable?",form:o(e),model:"is_negotiable",options:l.choices,required:""},null,8,["form","options"]),t(i,{form:o(e),label:"First Mobile No",type:"tel",model:"first_mobile",required:""},null,8,["form"]),t(i,{form:o(e),label:"Second Mobile No",type:"tel",model:"second_mobile"},null,8,["form"]),t(i,{form:o(e),label:"WhatsApp No",type:"tel",model:"whatsapp_mobile"},null,8,["form"]),t(i,{form:o(e),label:"Website",model:"website"},null,8,["form"]),t(i,{form:o(e),label:"Town",model:"town",required:""},null,8,["form"]),t(i,{form:o(e),label:"Video Link",model:"video_link"},null,8,["form"]),t(i,{form:o(e),label:"Short Description",model:"short_description",textarea:""},null,8,["form"])])]),m("div",D,[s[4]||(s[4]=m("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Product Description",-1)),t(I,{modelValue:o(e).description,"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).description=a)},null,8,["modelValue"]),o(e).errors.description?(g(),P(F,{key:0,message:o(e).errors.description},null,8,["message"])):q("",!0)])]),"media-section":d(()=>[t(R,{ref_key:"featureUploadRef",ref:y,form:o(e),"featured-preview":l.product.featured,file:o(e).featured,"onUpdate:file":s[1]||(s[1]=a=>o(e).featured=a),"model-name":"featured"},null,8,["form","featured-preview","file"]),t(C,{ref_key:"galleryUploadRef",ref:b,form:o(e),files:o(e).gallery,"onUpdate:files":s[2]||(s[2]=a=>o(e).gallery=a),"gallery-errors":u.value,"gallery-items":p.value},null,8,["form","files","gallery-errors","gallery-items"])]),_:1},8,["form","featured-preview","gallery-items","gallery-errors"])])]),_:1})],64))}});export{ue as default};
