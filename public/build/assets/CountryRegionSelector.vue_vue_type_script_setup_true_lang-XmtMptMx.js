import{b as $,c as B}from"./api-CCClPzjX.js";import{a as v,b as y,c as C,_ as V}from"./SelectValue.vue_vue_type_script_setup_true_lang-W0FqqJmc.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-B817A--H.js";import{L}from"./index-BCQqKblh.js";import{d as R,r as s,f as h,c as b,o as u,a as n,j as c,i as d,w as m,u as a,b as N,F as S}from"./app-DPOnAgRe.js";const _={key:1,class:"flex w-100 text-sm items-center gap-2 text-fade"},q=R({__name:"CountryRegionSelector",props:{form:{},countryModel:{},regionModel:{},class:{}},setup(k){const o=k,g=s([]),t=s([]),p=s(null),f=s(!1),i=s(!1);async function M(e){o.regionModel&&(t.value=[],o.form[o.regionModel]=null,i.value=!0,t.value=(await B(e)).regions,i.value=!1)}return h(async()=>{f.value=!0,g.value=(await $()).countries,f.value=!1,o.countryModel&&o.regionModel&&o.form[o.countryModel]&&(o.form[o.countryModel]&&(p.value=o.form[o.regionModel]),await M(o.form[o.countryModel])),o.form[o.regionModel]=p.value}),(e,r)=>(u(),b(S,null,[n(a(V),{modelValue:e.form[e.countryModel],"onUpdate:modelValue":[r[0]||(r[0]=l=>e.form[e.countryModel]=l),M],disabled:f.value},{default:m(()=>[n(a(v),{class:"col-span-2 w-full md:col-span-1 lg:col-span-2"},{default:m(()=>[n(a(y),{placeholder:i.value?"Loading countries...":"Select country"},null,8,["placeholder"])]),_:1}),n(a(C),{options:g.value.map(l=>({label:l.name,value:l.id})),slice:"all"},null,8,["options"])]),_:1},8,["modelValue","disabled"]),e.countryModel?(u(),c(w,{key:0,message:e.form.errors[e.countryModel]},null,8,["message"])):d("",!0),i.value&&e.regionModel?(u(),b("div",_,[r[2]||(r[2]=N("span",null,"Loading regions ...",-1)),n(a(L),{size:12,class:"animate-spin"})])):d("",!0),e.regionModel&&t.value.length?(u(),c(a(V),{key:2,modelValue:e.form[e.regionModel],"onUpdate:modelValue":r[1]||(r[1]=l=>e.form[e.regionModel]=l)},{default:m(()=>[n(a(v),{class:"col-span-2 w-full md:col-span-1 lg:col-span-2"},{default:m(()=>[n(a(y),{placeholder:"Select region"})]),_:1}),n(a(C),{options:t.value.map(l=>({label:l.name,value:l.id})),slice:"all"},null,8,["options"])]),_:1},8,["modelValue"])):d("",!0),e.regionModel?(u(),c(w,{key:3,message:e.form.errors[e.regionModel]},null,8,["message"])):d("",!0)],64))}});export{q as _};
