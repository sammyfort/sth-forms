import{d as S,x as w,r as k,q as $,f as B,c as C,o as n,a as _,u as e,g as j,w as c,b as u,j as m,m as A,y as N,i as p,e as d,l as O,F as P}from"./app-DPOnAgRe.js";import{a as V,t as E}from"./helpers-CHb5LI-f.js";import{_ as F}from"./Layout.vue_vue_type_script_setup_true_lang-DcxdysqF.js";import{_ as R}from"./PageHeader.vue_vue_type_script_setup_true_lang-DlzMI9g8.js";import{_ as q}from"./FormComponent.vue_vue_type_script_setup_true_lang-vACh1eso.js";import{_ as f}from"./index-BCQqKblh.js";import{_ as z}from"./PrincipalInvestigator.vue_vue_type_script_setup_true_lang-W3PFGXhP.js";import{_ as M}from"./StudyCoordinator.vue_vue_type_script_setup_true_lang-Zex-c1Um.js";import{_ as T}from"./ResearchWork.vue_vue_type_script_setup_true_lang-Cav_9tMO.js";import{_ as D}from"./ResearchDetails.vue_vue_type_script_setup_true_lang-58kpLD7R.js";import{_ as H}from"./InclusionExclusionCriteria.vue_vue_type_script_setup_true_lang-D2S6T7lK.js";import{_ as K}from"./StudyParticipationDuration.vue_vue_type_script_setup_true_lang-DJHG_-E5.js";import{_ as G}from"./CommunicationPublication.vue_vue_type_script_setup_true_lang-qR0YhyR8.js";import{_ as I}from"./VoucherValidation.vue_vue_type_script_setup_true_lang-BPFmhLpv.js";import{B as J}from"./building-2-CB-Yi_H8.js";import"./index-CPM9zIHX.js";import"./x-CB6FR-U1.js";import"./Primitive-8gby09Jh.js";import"./createLucideIcon-CZfMtB5R.js";import"./utils-bRKmu4jq.js";import"./check-D3mjp5QT.js";import"./index-dkW4UkYo.js";import"./InputText.vue_vue_type_script_setup_true_lang-gD7RrVov.js";import"./InputError.vue_vue_type_script_setup_true_lang-B817A--H.js";import"./Label.vue_vue_type_script_setup_true_lang-B1eICker.js";import"./Input.vue_vue_type_script_setup_true_lang-mv70VXdx.js";import"./InputSelect.vue_vue_type_script_setup_true_lang-Cc8Eqy3o.js";const L={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},Q={class:"mt-6 flex w-full justify-center space-x-4"},St=S({__name:"ResearchApply",props:{categories:{},titles:{},institution_investigators:{},staff_categories:{},yesno:{}},setup(y){const s=y,r=w({voucher_code:"",category_id:"",title:"",surname:"",other_name:"",email:"",telephone:"",postal_address:"",institution_investigator:"",department_unit:"",directorate:"",study_coordinator_name:"",coordinator_email:"",local_collaborator_name:"",local_collaborator_address:"",staff_categories:[],observation_study:"",interventional_study:"",study_location_level:"",documents:[],study_location_in_sth:"",study_title:"",study_design:[],study_objectives:"",inclusion_criteria:"",exclusion_criteria:"",sample_size:"",proposed_start_date:"",proposed_end_date:"",proposed_study_duration:"",recruitment_start_date:"",recruitment_end_date:"",source_of_fund:"",research_fund_base:"",research_total_budget:"",study_support_from_sth:"",equipments_needed:"",physical_financial_support:"",organize_forum:"",post_on_sth_website:"",agreement:""}),l={voucher_validation:I,principal_investigator:z,study_coordinator:M,research_work:T,Research_details:D,inclusion_and_exclusion_criteria:H,study_participation_duration:K,communication_publication:G},t=Object.keys(l),o=k(t[0]),v={voucher_validation:{categories:s.categories},principal_investigator:{form:r,titles:s.titles,institution_investigators:s.institution_investigators},study_coordinator:{staff_categories:s.staff_categories},research_work:{yesno:s.yesno},research_details:{yesno:s.yesno},communication_publication:{yesno:s.yesno}},g=$(()=>v[o.value]||{});B(()=>{console.log(s.titles)});const b=()=>{r.post(route("research.validateStep",{step:o.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{if(Object.keys(r.errors).length===0){const i=t.indexOf(o.value);i<t.length-1&&(o.value=t[i+1])}}})},h=()=>{const i=t.indexOf(o.value);i>0&&(o.value=t[i-1])},x=()=>{r.post(route("research.submit"),{onSuccess:()=>{r.reset(),E("Application Submitted")},onError:()=>{V("Something went wrong")}})};return(i,a)=>(n(),C(P,null,[_(e(j),{title:"Research Application"}),_(F,null,{default:c(()=>[u("div",L,[_(R,{title:"Apply For research at STH",subtitle:"Submit your details to to apply",icon:e(J)},null,8,["icon"]),_(q,{form:e(r),"submit-text":"Submit","processing-text":"Please wait...",onSubmit:x,"container-width":"max-w-8xl","ready-for-submit":o.value===e(t)[e(t).length-1]},{"form-sections":c(()=>[(n(),m(A(l[o.value]),N({form:e(r)},g.value),null,16,["form"])),u("div",Q,[o.value!==e(t)[0]?(n(),m(e(f),{key:0,variant:"outline",type:"button",onClick:h},{default:c(()=>a[0]||(a[0]=[d(" Back ")])),_:1,__:[0]})):p("",!0),o.value!==e(t)[e(t).length-1]?(n(),m(e(f),{key:1,type:"button",onClick:O(b,["prevent"])},{default:c(()=>a[1]||(a[1]=[d(" Next ")])),_:1,__:[1]})):p("",!0)])]),_:1},8,["form","ready-for-submit"])])]),_:1})],64))}});export{St as default};
