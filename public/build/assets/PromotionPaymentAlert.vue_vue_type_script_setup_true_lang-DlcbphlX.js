import{_ as J,a as Q,b as j,c as f,d as K,e as m}from"./TableHeader.vue_vue_type_script_setup_true_lang-DudWUMRa.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-CoU5CkY3.js";import{_ as z}from"./index-DJ1xocaX.js";import{_ as ee,a as te,b as ae,c as se,d as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-BZW2hOyY.js";import{_ as $}from"./index-iBBGpfGc.js";import{h,n as le}from"./helpers-DgrGhv05.js";import{C as M}from"./credit-card-bbUauRM7.js";import{c as ne}from"./createLucideIcon-BhVMf7d4.js";import{X as re}from"./x-BepfkO9S.js";import{C as ue}from"./calendar-BzFDUQdy.js";import{C as F}from"./clock-03OLz9rd.js";import{C as R,_ as S}from"./AlertTitle.vue_vue_type_script_setup_true_lang-C_m-v6s4.js";import{C as oe}from"./circle-check-big-DJE-UZ7U.js";import{d as H,r as Y,q as E,c as b,o as i,b as u,i as _,j as c,a,e as l,u as e,w as s,t as d,F as U,h as ie,n as de,m as fe}from"./app-CqEa0Bzm.js";import{_ as V,a as A}from"./index-DFzEkA9m.js";import{C as me}from"./check-CwSeRWLB.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=ne("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_e={class:"rounded-2xl border border-gray-100 bg-white p-6 shadow-xl mt-4"},ce={class:"mb-6 flex items-center justify-between"},pe={class:"flex items-center gap-2 text-2xl font-bold text-gray-900"},ye={class:"mb-6 space-y-2"},ve={class:"flex flex-col sm:flex-row gap-4"},ge={class:"relative flex-1"},xe={class:"overflow-x-auto"},we={class:"flex items-center gap-1.5"},be={class:"font-semibold"},Ce={class:"flex items-center gap-1"},ke={class:"font-medium"},$e={key:0,class:"text-center py-8"},De={key:1,class:"text-center py-8"},Oe=H({__name:"PaymentHistory",props:{promotions:{}},setup(p){const w=p,r=Y(""),y=Y("all"),D=E(()=>{let o=[...w.promotions];if(r.value){const t=r.value.toLowerCase();o=o.filter(n=>{var C,v,g,x,P,B,N,T,I,q;return((v=(C=n.payment_reference)==null?void 0:C.toLowerCase())==null?void 0:v.includes(t))||((x=(g=n.amount)==null?void 0:g.toString())==null?void 0:x.includes(t))||((B=(P=n.payment_platform)==null?void 0:P.toLowerCase())==null?void 0:B.includes(t))||((T=(N=n.payment_channel)==null?void 0:N.toLowerCase())==null?void 0:T.includes(t))||((q=(I=n.plan.name)==null?void 0:I.toLowerCase())==null?void 0:q.includes(t))})}if(y.value!=="all"){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate());o=o.filter(C=>{const v=new Date(C.created_at);switch(y.value){case"today":return v>=n;case"week":const g=new Date(n);return g.setDate(g.getDate()-7),v>=g;case"month":const x=new Date(n);return x.setMonth(x.getMonth()-1),v>=x;default:return!0}})}return o}),L=()=>{r.value="",y.value="all"},W=E(()=>r.value!==""||y.value!=="all"),X=o=>{switch(o){case"paid":return oe;case"pending":return F;case"failed":return R;default:return F}},G=o=>{switch(o){case"paid":return"text-green-600 bg-green-50 border-green-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"failed":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return(o,t)=>(i(),b("div",_e,[u("div",ce,[u("h2",pe,[a(e(M),{class:"h-6 w-6 text-primary"}),t[2]||(t[2]=l(" Promotion History "))]),o.promotions.length?(i(),c(e($),{key:0,variant:"secondary",class:"text-sm"},{default:s(()=>[l(d(D.value.length)+" of "+d(o.promotions.length)+" promotions ",1)]),_:1})):_("",!0)]),u("div",ye,[u("div",ve,[u("div",ge,[a(e(O),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),a(e(Z),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n),placeholder:"Search reference, amount, platform, or channel...",class:"pl-10 w-100"},null,8,["modelValue"])]),a(e(ee),{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=n=>y.value=n)},{default:s(()=>[a(e(te),{class:"w-full sm:w-40"},{default:s(()=>[a(e(ae),{placeholder:"Filter by date"})]),_:1}),a(e(se),null,{default:s(()=>[a(e(k),{value:"all"},{default:s(()=>t[3]||(t[3]=[l("All Time")])),_:1,__:[3]}),a(e(k),{value:"today"},{default:s(()=>t[4]||(t[4]=[l("Today")])),_:1,__:[4]}),a(e(k),{value:"week"},{default:s(()=>t[5]||(t[5]=[l("Last Week")])),_:1,__:[5]}),a(e(k),{value:"month"},{default:s(()=>t[6]||(t[6]=[l("Last Month")])),_:1,__:[6]})]),_:1})]),_:1},8,["modelValue"]),W.value?(i(),c(e(z),{key:0,variant:"outline",size:"sm",onClick:L,class:"flex items-center gap-1 whitespace-nowrap"},{default:s(()=>[a(e(re),{class:"h-3 w-3"}),t[7]||(t[7]=l(" Clear Filters "))]),_:1,__:[7]})):_("",!0)])]),u("div",xe,[a(e(J),null,{default:s(()=>[a(e(Q),null,{default:s(()=>[a(e(j),null,{default:s(()=>[a(e(f),{class:"text-left"},{default:s(()=>t[8]||(t[8]=[l("Date")])),_:1,__:[8]}),a(e(f),{class:"text-left"},{default:s(()=>t[9]||(t[9]=[l("Plan")])),_:1,__:[9]}),a(e(f),{class:"text-left"},{default:s(()=>t[10]||(t[10]=[l("Start Date")])),_:1,__:[10]}),a(e(f),{class:"text-left"},{default:s(()=>t[11]||(t[11]=[l("End Date")])),_:1,__:[11]}),a(e(f),{class:"text-left"},{default:s(()=>t[12]||(t[12]=[l("Status")])),_:1,__:[12]}),a(e(f),{class:"text-left"},{default:s(()=>t[13]||(t[13]=[l("Amount")])),_:1,__:[13]}),a(e(f),{class:"text-left"},{default:s(()=>t[14]||(t[14]=[l("Payment Status")])),_:1,__:[14]}),a(e(f),{class:"text-left"},{default:s(()=>t[15]||(t[15]=[l("Reference")])),_:1,__:[15]})]),_:1})]),_:1}),a(e(K),null,{default:s(()=>[(i(!0),b(U,null,ie(D.value,n=>(i(),c(e(j),{key:n.id},{default:s(()=>[a(e(m),null,{default:s(()=>[u("div",we,[a(e(ue),{class:"h-4 w-4 text-gray-400"}),l(" "+d(e(h)(n.created_at)),1)])]),_:2},1024),a(e(m),{class:"flex flex-col gap-2"},{default:s(()=>[u("span",be,d(n.plan.name),1),a(e($),{variant:"outline",class:"text-xs"},{default:s(()=>[u("span",null,d(n.plan.number_of_days)+" days",1)]),_:2},1024)]),_:2},1024),a(e(m),null,{default:s(()=>[l(d(n.payment_status=="paid"?e(h)(n.starts_at):""),1)]),_:2},1024),a(e(m),null,{default:s(()=>[l(d(n.payment_status=="paid"?e(h)(n.ends_at):""),1)]),_:2},1024),a(e(m),null,{default:s(()=>[n.payment_status==="paid"?(i(),c(e($),{key:0,variant:n.is_active?"success":"destructive"},{default:s(()=>[l(d(n.is_active?"Active":"Expired"),1)]),_:2},1032,["variant"])):_("",!0)]),_:2},1024),a(e(m),null,{default:s(()=>[u("div",Ce,[u("span",ke,"â‚µ"+d(e(le)(n.amount,2)),1)])]),_:2},1024),a(e(m),null,{default:s(()=>[a(e($),{class:de(["inline-flex items-center gap-1 text-xs font-medium capitalize",G(n.payment_status)])},{default:s(()=>[(i(),c(fe(X(n.payment_status)),{class:"h-3 w-3"})),l(" "+d(n.payment_status),1)]),_:2},1032,["class"])]),_:2},1024),a(e(m),{class:"font-mono text-gray-500"},{default:s(()=>[l(d(n.payment_reference),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),D.value.length===0&&o.promotions.length>0?(i(),b("div",$e,[a(e(O),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t[17]||(t[17]=u("p",{class:"text-gray-500"},"No promotion match your filters",-1)),a(e(z),{variant:"outline",size:"sm",onClick:L,class:"mt-2"},{default:s(()=>t[16]||(t[16]=[l(" Clear Filters ")])),_:1,__:[16]})])):_("",!0),o.promotions.length===0?(i(),b("div",De,[a(e(M),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t[18]||(t[18]=u("p",{class:"text-gray-500"},"No promotion found",-1))])):_("",!0)]))}});var he=(p=>(p.SERVICE="service",p.SIGNBOARD="signboard",p.JOB="job",p))(he||{});const Re=H({__name:"PromotionPaymentAlert",props:{payment_status:{}},setup(p){return(w,r)=>(i(),b(U,null,[w.payment_status=="success"?(i(),c(e(A),{key:0,class:"mb-5",variant:"success"},{default:s(()=>[a(e(me)),a(e(S),null,{default:s(()=>r[0]||(r[0]=[l("Payment Successful")])),_:1,__:[0]}),a(e(V),null,{default:s(()=>r[1]||(r[1]=[l(" Your payment has been successfully confirmed. "),u("br",null,null,-1),l(" Your promotion is now active and visible to potential customers. ")])),_:1,__:[1]})]),_:1})):_("",!0),w.payment_status=="pending"?(i(),c(e(A),{key:1,class:"mb-5",variant:"success"},{default:s(()=>[a(e(F)),a(e(S),null,{default:s(()=>r[2]||(r[2]=[l("Payment in Progress")])),_:1,__:[2]}),a(e(V),null,{default:s(()=>r[3]||(r[3]=[l(" We've received your request and are currently verifying your payment. "),u("br",null,null,-1),l(" This may take a few moments. Once confirmed, your promotion will be activated automatically. ")])),_:1,__:[3]})]),_:1})):_("",!0),w.payment_status=="cancelled"?(i(),c(e(A),{key:2,class:"mb-5",variant:"destructive"},{default:s(()=>[a(e(R)),a(e(S),null,{default:s(()=>r[4]||(r[4]=[l("Transaction Cancelled")])),_:1,__:[4]}),a(e(V),null,{default:s(()=>r[5]||(r[5]=[l(" You cancelled the payment process. "),u("br",null,null,-1),l(" If this was unintentional, please try again to complete your promotion. ")])),_:1,__:[5]})]),_:1})):_("",!0)],64))}});export{he as P,Re as _,Oe as a};
