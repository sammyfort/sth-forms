import{d as x,b2 as y,bC as _,r as w,s as f,f as U,c as r,o as i,b as t,a as u,u as d,t as c,i as k}from"./app-CO7tRMPa.js";import{c as L}from"./createLucideIcon-DSnvKsHv.js";import{U as R}from"./upload-j3A8EneV.js";import{X as p}from"./x-D1YiTpkX.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=L("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),N={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},j={class:"flex items-center space-x-3 mb-4"},C={class:"p-2 bg-primary rounded-lg"},F={class:"text-lg font-semibold text-gray-900"},O={class:"relative"},M={class:"relative rounded-lg border-2 border-dashed border-gray-300 p-6 transition-all duration-200 hover:border-primary hover:bg-blue-50/50 group"},P={key:0,class:"text-center"},W={key:1,class:"relative"},B=["src","alt"],V={class:"absolute bottom-2 left-2 px-2 py-1 bg-black/50 rounded text-white text-xs"},E={key:0,class:"mt-2 text-sm text-red-600 flex items-center space-x-1"},X=x({__name:"FeatureFileUpload",props:y({form:{},featuredPreview:{default:null},modelName:{default:"featured"},title:{}},{file:{default:null},fileModifiers:{}}),emits:["update:file"],setup(m,{expose:b}){const l=m,s=_(m,"file"),e=w(null);b({resetFeature:()=>{e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value),s.value=null,e.value=l.featuredPreview}}),f(()=>l.featuredPreview,a=>{a&&!s.value&&(e.value=a)},{immediate:!0}),f(s,a=>{a&&(e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value),e.value=URL.createObjectURL(a))},{immediate:!0});const g=a=>{var v;const o=a.target,n=((v=o.files)==null?void 0:v[0])||null;e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value),s.value=n,o.value=""},h=()=>{e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value),s.value=null,e.value=l.featuredPreview};return U(()=>()=>{e.value&&e.value.startsWith("blob:")&&URL.revokeObjectURL(e.value)}),(a,o)=>(i(),r("div",N,[t("div",j,[t("div",C,[u(d(I),{class:"h-5 w-5 text-white"})]),t("h3",F,c(l.title||"Featured Image"),1)]),t("div",O,[t("div",M,[t("input",{type:"file",accept:"image/*",onChange:g,class:"absolute inset-0 h-full w-full cursor-pointer opacity-0"},null,32),e.value?(i(),r("div",W,[t("img",{src:e.value,alt:s.value?s.value.name:"Featured image",class:"w-full h-40 rounded-lg object-cover",onError:o[0]||(o[0]=n=>console.log("Image failed to load:",e.value)),onLoad:o[1]||(o[1]=n=>console.log("Image loaded successfully:",e.value))},null,40,B),t("button",{type:"button",onClick:h,class:"absolute top-2 right-2 p-1 bg-red-100 hover:bg-red-200 rounded-full shadow-lg transition-colors duration-200"},[u(d(p),{class:"h-4 w-4 text-red-600"})]),t("div",V,c(s.value?"New":"Current"),1)])):(i(),r("div",P,[u(d(R),{class:"mx-auto h-12 w-12 text-gray-400 group-hover:text-primary transition-colors duration-200"}),o[2]||(o[2]=t("div",{class:"mt-4"},[t("p",{class:"text-sm font-medium text-gray-900"},"Upload featured image"),t("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG up to 10MB")],-1))]))]),a.form.errors[a.modelName]?(i(),r("p",E,[u(d(p),{class:"h-4 w-4"}),t("span",null,c(a.form.errors[a.modelName]),1)])):k("",!0)])]))}});export{X as _};
