import{d as I,U as R,r as p,q as U,f as D,I as E,s as V,c as t,o as s,a as b,i as u,u as a,w as q,e as k,C as F,t as c,D as K,b as r,F as y,h as x,n as w,z as H,l as M}from"./app-9tJ8xW7z.js";import{_ as P}from"./InputError.vue_vue_type_script_setup_true_lang-D7jv5w4z.js";import{_ as Q}from"./Label.vue_vue_type_script_setup_true_lang-C5EgUULi.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-KqZdVUtH.js";const G={class:"grid gap-2"},J={class:"text-destructive"},W={key:0},X={class:"flex flex-wrap items-center gap-2"},Y=["onClick"],Z={key:0,class:"text-muted-foreground select-none"},ee={class:"ml-auto"},oe={key:0,class:"absolute z-50 mt-1 w-full max-h-60 bg-popover border border-border rounded-md shadow-md overflow-hidden"},re={class:"p-2 border-b border-border"},te={class:"relative"},se={class:"max-h-48 overflow-y-auto"},le=["onClick"],ne={class:"text-foreground"},de={class:"flex items-center"},ie={key:0,class:"w-4 h-4 bg-primary rounded-full flex items-center justify-center"},ae={key:1,class:"w-4 h-4 border-2 border-border rounded-full group-hover:border-primary transition-colors"},ue={key:0,class:"p-3 text-center"},ce={key:1,class:"p-3 text-center text-muted-foreground"},me={key:0,class:"text-foreground"},fe={key:1,class:"text-muted-foreground"},pe={key:0,class:"absolute z-50 mt-1 w-full max-h-60 bg-popover border border-border rounded-md shadow-md overflow-hidden"},ve={key:0,class:"p-2 border-b border-border"},ge={class:"relative"},he={class:"max-h-48 overflow-y-auto"},be=["onClick"],ke={class:"text-foreground"},ye={class:"flex items-center"},xe={key:0,class:"w-4 h-4 bg-primary rounded-full flex items-center justify-center"},we={key:1,class:"w-4 h-4 border-2 border-border rounded-full group-hover:border-primary transition-colors"},_e={key:0,class:"p-3 text-center text-muted-foreground"},Me=I({__name:"InputSelect",props:{form:{},model:{},label:{},options:{},searchable:{type:Boolean},taggable:{type:Boolean}},setup(L){const e=L,v=R(),$=Math.random().toString(36).substring(2,10),d=p(""),i=p(!1),g=p(),N=p(),m=U(()=>!e.searchable||!d.value?e.options:e.options.filter(l=>l.label.toLowerCase().includes(d.value.toLowerCase()))),z=p([]);function _(l){g.value&&!g.value.contains(l.target)&&(i.value=!1)}D(()=>{document.addEventListener("click",_)}),E(()=>{document.removeEventListener("click",_)}),V(i,l=>{l?l&&e.searchable&&!e.taggable&&setTimeout(()=>{},100):d.value=""}),V(()=>{var l;return(l=e.form)==null?void 0:l[e.model]},l=>{e.taggable&&Array.isArray(l)&&(z.value=l)},{immediate:!0});function A(l){if(!e.form||!e.model)return;const f=e.form[e.model].indexOf(l);f===-1?e.form[e.model].push(l):e.form[e.model].splice(f,1)}function C(){if(!e.form||!e.model)return;const l=d.value.trim();l&&!e.form[e.model].includes(l)&&(e.form[e.model].push(l),d.value="")}function O(l){if(!e.form||!e.model)return;const o=e.form[e.model].indexOf(l);o!==-1&&e.form[e.model].splice(o,1)}function T(l){!e.form||!e.model||(e.form[e.model]=l,i.value=!1)}return(l,o)=>{var f,j;return s(),t("div",G,[b(a(Q),{for:a($)},{default:q(()=>[k(c(e.label)+" ",1),F(r("span",J,"*",512),[[K,e.label&&a(v).hasOwnProperty("required")]])]),_:1},8,["for"]),e.form&&e.model?(s(),t("div",W,[e.taggable?(s(),t("div",{key:0,class:"relative",ref_key:"dropdownRef",ref:g},[r("div",{class:"flex min-h-10 w-full items-center justify-between rounded-md border border-input bg-gray-50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer gap-2 flex-wrap",onClick:o[0]||(o[0]=n=>i.value=!i.value)},[r("div",X,[(s(!0),t(y,null,x(e.form[e.model],n=>{var h;return s(),t("span",{key:n,class:"inline-flex items-center gap-1 bg-primary text-primary-foreground px-2 py-1 rounded-md text-sm font-medium shadow-sm hover:bg-primary/90 transition-colors"},[k(c(((h=e.options.find(B=>B.value===n))==null?void 0:h.label)||n)+" ",1),r("button",{onClick:M(B=>O(n),["stop"]),class:"ml-1 hover:bg-primary-foreground/20 rounded-full p-0.5 transition-colors","aria-label":"Remove tag"},o[5]||(o[5]=[r("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Y)])}),128))]),(f=e.form[e.model])!=null&&f.length?u("",!0):(s(),t("span",Z,"Select or add options... ")),r("div",ee,[(s(),t("svg",{class:w(["w-4 h-4 text-muted-foreground transition-transform duration-200",{"rotate-180":i.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[6]||(o[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),i.value?(s(),t("div",oe,[r("div",re,[r("div",te,[o[7]||(o[7]=r("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),b(a(S),{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),onKeyup:H(C,["enter"]),placeholder:"Search or type to add...",class:"pl-10"},null,8,["modelValue"])])]),r("div",se,[(s(!0),t(y,null,x(m.value,n=>(s(),t("div",{key:n.value,onClick:h=>A(n.value),class:"px-3 py-2 hover:bg-accent cursor-pointer flex items-center justify-between group transition-colors"},[r("span",ne,c(n.label),1),r("div",de,[Array.isArray(e.form[e.model])&&e.form[e.model].includes(n.value)?(s(),t("div",ie,o[8]||(o[8]=[r("svg",{class:"w-2.5 h-2.5 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):(s(),t("div",ae))])],8,le))),128)),e.searchable&&m.value.length===0&&d.value.trim()?(s(),t("div",ue,[o[10]||(o[10]=r("div",{class:"text-muted-foreground mb-2"},"No results found",-1)),r("button",{onClick:C,class:"inline-flex items-center gap-2 px-3 py-1.5 bg-primary/10 text-primary rounded-md hover:bg-primary/20 transition-colors text-sm font-medium"},[o[9]||(o[9]=r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),k(' Add "'+c(d.value.trim())+'" ',1)])])):e.searchable&&m.value.length===0&&!d.value.trim()?(s(),t("div",ce," Start typing to search or add new options ")):u("",!0)])])):u("",!0)],512)):(s(),t("div",{key:1,class:"relative",ref_key:"dropdownRef",ref:g},[r("div",{class:w(["flex h-10 w-full items-center justify-between rounded-md border border-input bg-gray-50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",{"opacity-100 cursor-not-allowed":a(v).disabled}]),onClick:o[2]||(o[2]=n=>!a(v).disabled&&(i.value=!i.value))},[e.form[e.model]&&e.options.length?(s(),t("span",me,c(((j=e.options.find(n=>n.value===e.form[e.model]))==null?void 0:j.label)||e.form[e.model]),1)):(s(),t("span",fe,c(a(v).placeholder||"Select an option"),1)),(s(),t("svg",{class:w(["w-4 h-4 text-muted-foreground transition-transform duration-200 ml-2",{"rotate-180":i.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[11]||(o[11]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),i.value?(s(),t("div",pe,[e.searchable?(s(),t("div",ve,[r("div",ge,[o[12]||(o[12]=r("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),b(a(S),{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=n=>d.value=n),ref_key:"searchInput",ref:N,onClick:o[4]||(o[4]=M(()=>{},["stop"])),placeholder:"Search...",class:"pl-10"},null,8,["modelValue"])])])):u("",!0),r("div",he,[(s(!0),t(y,null,x(m.value,n=>(s(),t("div",{key:n.value,onClick:h=>T(n.value),class:"px-3 py-2 hover:bg-accent cursor-pointer flex items-center justify-between group transition-colors"},[r("span",ke,c(n.label),1),r("div",ye,[e.form[e.model]===n.value?(s(),t("div",xe,o[13]||(o[13]=[r("svg",{class:"w-2.5 h-2.5 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):(s(),t("div",we))])],8,be))),128)),e.searchable&&m.value.length===0?(s(),t("div",_e," No results found ")):u("",!0)])])):u("",!0)],512)),b(P,{message:e.form.errors[e.model]},null,8,["message"])])):u("",!0)])}}});export{Me as _};
