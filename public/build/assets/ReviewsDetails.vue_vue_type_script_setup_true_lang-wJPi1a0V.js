import{c as M}from"./createLucideIcon-CZfMtB5R.js";import{_ as V,a as j}from"./ReviewsList.vue_vue_type_script_setup_true_lang-CpsLJZ9g.js";import{S as g}from"./VueStarRating.common-DutP4AYr.js";import{a as N,t as D,n as c}from"./helpers-CHb5LI-f.js";import{_ as C}from"./index-BCQqKblh.js";import{d as z,j as I,o as b,w as f,k as O,u as t,x as E,r as R,f as L,c as x,a as o,b as e,l as Q,e as h,B as W,q as A,n as F,i as B,t as d,G as w}from"./app-DPOnAgRe.js";import{c as G}from"./utils-bRKmu4jq.js";import{g as H,h as T,j as J,k as K}from"./Layout.vue_vue_type_script_setup_true_lang-DcxdysqF.js";import{a as X,P as Y}from"./Primitive-8gby09Jh.js";import{_ as Z}from"./InputText.vue_vue_type_script_setup_true_lang-gD7RrVov.js";import{r as ee}from"./api-CCClPzjX.js";var se=z({__name:"PopoverClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(y){const u=y;X();const m=H();return(i,v)=>(b(),I(t(Y),{type:i.as==="button"?"button":void 0,as:i.as,"as-child":u.asChild,onClick:v[0]||(v[0]=l=>t(m).onOpenChange(!1))},{default:f(()=>[O(i.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),te=se;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=M("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=M("Maximize2Icon",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),ae={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},ie={class:"w-1/2 flex items-center"},le={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},re={class:"w-1/2 flex items-center"},oe={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ne={class:"w-1/2 flex items-center"},de={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ue={class:"w-1/2 flex items-center"},me={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ve={class:"w-1/2 flex items-center"},pe={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},fe={class:"w-1/2 flex items-center"},ce={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ge={class:"pt-3 flex justify-between"},be=z({__name:"RatePopover",props:{ratable:{},ratable_type:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(y,{emit:u}){const m=y,i=E({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:"",ratable_id:m.ratable.id,ratable_type:m.ratable_type}),v=R(null),l=R(null),s=u,$=async()=>{await ee(i,m.ratable.id,r=>{var a,n;r.props.message&&(D(r.props.message),s("rated",r.props.data.ratable.total_average_rating)),(n=(a=l==null?void 0:l.value)==null?void 0:a.$el)==null||n.click()},null,r=>{for(const a in r){N(r[a]);break}})};L(()=>{var r,a,n,S,q,P,U;if(v.value=(r=m.ratable.reviews)!=null&&r.length?m.ratable.reviews[0]:null,v.value){const _=v.value.ratings;i.review=v.value.review,i.overall=((a=_.find(p=>p.key==="overall"))==null?void 0:a.value)??0,i.customer_service=((n=_.find(p=>p.key==="customer_service"))==null?void 0:n.value)??0,i.quality=((S=_.find(p=>p.key==="quality"))==null?void 0:S.value)??0,i.price=((q=_.find(p=>p.key==="price"))==null?void 0:q.value)??0,i.communication=((P=_.find(p=>p.key==="communication"))==null?void 0:P.value)??0,i.speed=((U=_.find(p=>p.key==="speed"))==null?void 0:U.value)??0}});const k=r=>{s("popoverOpen",r)};return(r,a)=>(b(),x("div",null,[o(t(T),{"onUpdate:open":k},{default:f(()=>[o(t(J),null,{default:f(()=>[O(r.$slots,"default")]),_:3}),o(t(K),{class:"w-[20rem]"},{default:f(()=>[e("form",{onSubmit:Q($,["prevent"]),class:"grid grid-cols-1"},[e("div",ae,[a[6]||(a[6]=e("div",{class:"w-1/2"},"Overall",-1)),e("div",ie,[o(t(g),{rating:t(i).overall,"onUpdate:rating":a[0]||(a[0]=n=>t(i).overall=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",le,[a[7]||(a[7]=e("div",{class:"w-1/2"},"Customer Service",-1)),e("div",re,[o(t(g),{rating:t(i).customer_service,"onUpdate:rating":a[1]||(a[1]=n=>t(i).customer_service=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",oe,[a[8]||(a[8]=e("div",{class:"w-1/2"},"Quality",-1)),e("div",ne,[o(t(g),{rating:t(i).quality,"onUpdate:rating":a[2]||(a[2]=n=>t(i).quality=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",de,[a[9]||(a[9]=e("div",{class:"w-1/2"},"Price",-1)),e("div",ue,[o(t(g),{rating:t(i).price,"onUpdate:rating":a[3]||(a[3]=n=>t(i).price=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",me,[a[10]||(a[10]=e("div",{class:"w-1/2"},"Communication",-1)),e("div",ve,[o(t(g),{rating:t(i).communication,"onUpdate:rating":a[4]||(a[4]=n=>t(i).communication=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",pe,[a[11]||(a[11]=e("div",{class:"w-1/2"},"Speed",-1)),e("div",fe,[o(t(g),{rating:t(i).speed,"onUpdate:rating":a[5]||(a[5]=n=>t(i).speed=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",ce,[o(Z,{textarea:"","container-class":"w-full",label:"Review",required:"",form:t(i),model:"review"},null,8,["form"])]),e("div",ge,[o(t(te),{"as-child":"",ref_key:"closeBtn",ref:l},{default:f(()=>[o(t(C),{type:"button",size:"sm",variant:"secondary"},{default:f(()=>a[12]||(a[12]=[h("Close")])),_:1,__:[12]})]),_:1},512),o(t(C),{type:"submit",size:"sm",processing:t(i).processing},{default:f(()=>a[13]||(a[13]=[h("Submit Review")])),_:1,__:[13]},8,["processing"])])],32)]),_:1})]),_:3})]))}}),ye={class:"flex items-center"},_e={key:0,class:"ms-auto md:block hidden"},we={key:1,class:"ms-auto md:hidden"},xe={class:"my-5 flex flex-col items-start gap-4"},$e={class:"flex items-start gap-2 lg:gap-4"},ke={class:"text-5xl"},Ce={class:""},he={class:"w-full"},ze={class:"flex flex-wrap"},Re={class:"w-full md:w-1/2"},Se={class:"flex flex-col gap-1 text-sm"},qe={class:"flex gap-3"},Pe={class:"flex gap-3"},Ue={class:"flex gap-3"},Be={class:"flex gap-3"},Me={class:"flex gap-3"},Ie={class:"flex gap-3"},Oe={class:"w-full md:w-1/2 mt-7 md:mt-0"},Ve={class:"flex flex-col gap-1 text-sm"},je={class:"flex items-center gap-4"},Ne={class:"flex bg-gray-200 w-[150px]"},De={class:"flex items-center gap-4"},Ee={class:"flex bg-gray-200 w-[150px]"},Le={class:"flex items-center gap-4"},Qe={class:"flex bg-gray-200 w-[150px]"},We={class:"flex items-center gap-4"},Ae={class:"flex bg-gray-200 w-[150px]"},Fe={class:"flex items-center gap-4"},Ge={class:"flex bg-gray-200 w-[150px]"},He=z({__name:"ReviewsInsight",props:{ratable:{},ratings:{},distributions:{},class:{},ratable_type:{}},setup(y){const u=W(),m=A(()=>u.props.auth.user),i=y,v=R(i.ratable.total_average_rating);return(l,s)=>{var $,k;return b(),x("div",{class:F(t(G)("p-4 border-t text-fade",i.class))},[e("div",ye,[s[2]||(s[2]=e("div",{class:"font-medium text-lg"},"Reviews",-1)),(($=m.value)==null?void 0:$.id)!==l.ratable.created_by_id?(b(),x("div",_e,[o(be,{ratable:l.ratable,ratable_type:l.ratable_type,onRated:s[0]||(s[0]=r=>{v.value=r})},{default:f(()=>[o(t(C),{size:"sm"},{default:f(()=>{var r;return[h(d((r=i.ratable.reviews)!=null&&r.length?"Update review":"Write review"),1)]}),_:1})]),_:1},8,["ratable","ratable_type"])])):B("",!0),((k=m.value)==null?void 0:k.id)!==l.ratable.created_by_id?(b(),x("div",we,[o(V,{ratable:l.ratable,ratable_type:l.ratable_type,onRated:s[1]||(s[1]=r=>{v.value=r})},{default:f(()=>[o(t(C),{size:"sm"},{default:f(()=>{var r;return[h(d((r=i.ratable.reviews)!=null&&r.length?"Update review":"Write review"),1)]}),_:1})]),_:1},8,["ratable","ratable_type"])])):B("",!0)]),e("div",xe,[e("div",$e,[e("div",ke,d(t(c)(l.ratable.total_average_rating,1)),1),(b(),I(t(g),{"star-size":37,"show-rating":!1,rating:v.value,"read-only":"","active-color":"#009689",padding:3,class:"md:w-1/3 w-full",key:`rating-card-${l.ratable.id}`,increment:.01},null,8,["rating"]))]),e("div",Ce," ("+d(l.ratable.reviews_count)+" total reviews) ",1),e("div",he,[s[16]||(s[16]=e("div",{class:"text-xl mb-3 font-medium text-secondary"},"Insights",-1)),e("div",ze,[e("div",Re,[s[9]||(s[9]=e("div",{class:"font-medium mb-2"},"Ratings By Category",-1)),e("div",Se,[e("div",qe,[e("div",null,d(t(c)(l.ratings.overall,1)),1),s[3]||(s[3]=e("div",null,"Overall",-1))]),e("div",Pe,[e("div",null,d(t(c)(l.ratings.customer_service,1)),1),s[4]||(s[4]=e("div",null,"Customer Service",-1))]),e("div",Ue,[e("div",null,d(t(c)(l.ratings.quality,1)),1),s[5]||(s[5]=e("div",null,"Quality",-1))]),e("div",Be,[e("div",null,d(t(c)(l.ratings.price,1)),1),s[6]||(s[6]=e("div",null,"Price",-1))]),e("div",Me,[e("div",null,d(t(c)(l.ratings.communication,1)),1),s[7]||(s[7]=e("div",null,"Communication",-1))]),e("div",Ie,[e("div",null,d(t(c)(l.ratings.speed,1)),1),s[8]||(s[8]=e("div",null,"Speed",-1))])])]),e("div",Oe,[s[15]||(s[15]=e("div",{class:"font-medium mb-2"},"Ratings Distribution",-1)),e("div",Ve,[e("div",je,[s[10]||(s[10]=e("div",{class:"w-[50px]"},"5 stars",-1)),e("div",Ne,[e("div",{class:"bg-gray-400 h-2",style:w({width:`${l.distributions[5]}%`})},null,4)]),e("div",null,d(l.distributions[5])+"%",1)]),e("div",De,[s[11]||(s[11]=e("div",{class:"w-[50px]"},"4 stars",-1)),e("div",Ee,[e("div",{class:"bg-gray-400 h-2",style:w({width:`${l.distributions[4]}%`})},null,4)]),e("div",null,d(l.distributions[4])+"%",1)]),e("div",Le,[s[12]||(s[12]=e("div",{class:"w-[50px]"},"3 stars",-1)),e("div",Qe,[e("div",{class:"bg-gray-400 h-2",style:w({width:`${l.distributions[3]}%`})},null,4)]),e("div",null,d(l.distributions[3])+"%",1)]),e("div",We,[s[13]||(s[13]=e("div",{class:"w-[50px]"},"2 stars",-1)),e("div",Ae,[e("div",{class:"bg-gray-400 h-2",style:w({width:`${l.distributions[2]}%`})},null,4)]),e("div",null,d(l.distributions[2])+"%",1)]),e("div",Fe,[s[14]||(s[14]=e("div",{class:"w-[50px]"},"1 star",-1)),e("div",Ge,[e("div",{class:"bg-gray-400 h-2",style:w({width:`${l.distributions[1]}%`})},null,4)]),e("div",null,d(l.distributions[1])+"%",1)])])])])])]),s[17]||(s[17]=e("div",{class:"w-full flex flex-col gap-3 mt-3"},null,-1))],2)}}}),Te={class:"p-4"},ns=z({__name:"ReviewsDetails",props:{ratable:{},ratings:{},distributions:{},reviews:{},ratable_type:{}},setup(y){return(u,m)=>(b(),x("div",null,[o(He,{ratable:u.ratable,ratings:u.ratings,distributions:u.distributions,ratable_type:u.ratable_type},null,8,["ratable","ratings","distributions","ratable_type"]),e("div",Te,[o(j,{ratable:u.ratable,reviews:u.reviews},null,8,["ratable","reviews"])])]))}});export{rs as C,os as M,ns as _};
