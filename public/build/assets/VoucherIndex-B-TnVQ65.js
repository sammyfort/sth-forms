import{d as b,x,f as v,q as w,r as k,c as d,o as i,a,u as o,g as C,w as p,b as s,e as u,i as V,t as f,l as P,j as _,F as j}from"./app-DPOnAgRe.js";import{_ as q}from"./Layout.vue_vue_type_script_setup_true_lang-DcxdysqF.js";import{_ as n}from"./InputText.vue_vue_type_script_setup_true_lang-gD7RrVov.js";import{t as B,a as N}from"./helpers-CHb5LI-f.js";import{_ as $,L as S}from"./index-BCQqKblh.js";import{_ as I}from"./PageHeader.vue_vue_type_script_setup_true_lang-DlzMI9g8.js";import{_ as M}from"./InputSelect.vue_vue_type_script_setup_true_lang-Cc8Eqy3o.js";import{_ as E}from"./PaymentAlert.vue_vue_type_script_setup_true_lang-LYGqnkrj.js";import{c as H}from"./createLucideIcon-CZfMtB5R.js";import{C as T}from"./check-D3mjp5QT.js";import"./x-CB6FR-U1.js";import"./Primitive-8gby09Jh.js";import"./utils-bRKmu4jq.js";import"./index-CPM9zIHX.js";import"./InputError.vue_vue_type_script_setup_true_lang-B817A--H.js";import"./Label.vue_vue_type_script_setup_true_lang-B1eICker.js";import"./Input.vue_vue_type_script_setup_true_lang-mv70VXdx.js";import"./index-dkW4UkYo.js";import"./index-C17vXW2J.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-e-kgYvh_.js";import"./clock-C6MIVHUg.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=H("TicketCheckIcon",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),L={class:"mx-auto max-w-3xl px-4 py-8 sm:px-6 lg:px-8"},G={class:"space-y-8"},R={class:"w-full bg-gray-50 rounded-xl"},z={class:"rounded-xl border shadow-sm border-gray-200 bg-white p-6"},A={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},D={class:"rounded-xl border border-gray-200 bg-white p-6"},Z={class:"flex flex-col items-center justify-center space-y-4 md:flex-row md:justify-between md:space-y-0"},J={class:"text-center text-sm text-gray-600 md:text-left"},K={key:0,class:"text-green-600"},_e=b({__name:"VoucherIndex",props:{categories:{}},setup(h){const c=h,e=x({email:"",phone:"",category_id:"",full_name:""});v(()=>{if(!document.querySelector('script[src="https://js.paystack.co/v1/inline.js"]')){const r=document.createElement("script");r.src="https://js.paystack.co/v1/inline.js",document.head.appendChild(r)}});const l=w(()=>{var t;const r=Number(e.category_id);return((t=c.categories.find(g=>g.id===r))==null?void 0:t.price)??0}),m=k(""),y=()=>{window.PaystackPop.setup({key:"pk_test_1de8a9f52077e10e50d5fdb87229372eca98d10e",email:e.email,amount:l.value*100,currency:"GHS",ref:`STHRC-${Math.floor(Math.random()*1e9+1)}`,metadata:{email:e.email,phone:e.phone,category_id:e.category_id,full_name:e.full_name},onClose:()=>{N("Payment cancelled")},callback:t=>{console.log(t),m.value=t==null?void 0:t.status,B("Payment successful"),e.reset()}}).openIframe()};return(r,t)=>(i(),d(j,null,[a(o(C),{title:"Buy Voucher"}),a(q,null,{default:p(()=>[s("div",L,[s("div",G,[a(I,{title:"Buy Voucher",subtitle:`Purchase a voucher to apply.
                Voucher code will be sent to email and phone number provided below. `,icon:o(F)},null,8,["icon"]),a(E,{payment_status:m.value},null,8,["payment_status"]),s("div",R,[s("div",z,[t[0]||(t[0]=s("h2",{class:"mb-6 text-center text-lg font-semibold text-gray-900"},"Buy Voucher",-1)),s("div",A,[a(n,{form:o(e),label:"Full Name",model:"full_name",required:""},null,8,["form"]),a(n,{form:o(e),label:"Email",model:"email",required:""},null,8,["form"]),a(n,{form:o(e),label:"Phone",model:"phone",required:""},null,8,["form"]),a(M,{form:o(e),label:"Category",model:"category_id",options:c.categories,required:"",searchable:""},null,8,["form","options"])])])]),s("div",D,[s("div",Z,[s("p",J,[t[1]||(t[1]=u(" Review your information and continue ")),o(e).category_id?(i(),d("span",K," to pay GHS "+f(l.value),1)):V("",!0)]),a(o($),{onClick:P(y,["prevent"]),disabled:o(e).processing||!o(e).email||l.value<1,class:"rounded-lg bg-gradient-to-r from-primary to-primary px-8 py-3 font-semibold text-white shadow-lg transition-all duration-200 hover:from-primary hover:to-orange-300 hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-50"},{default:p(()=>[o(e).processing?(i(),_(o(S),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(i(),_(o(T),{key:1,class:"mr-2 h-5 w-5"})),u(" "+f(o(e).processing?"Please wait":"Pay Now"),1)]),_:1},8,["disabled"])])])])])]),_:1})],64))}});export{_e as default};
